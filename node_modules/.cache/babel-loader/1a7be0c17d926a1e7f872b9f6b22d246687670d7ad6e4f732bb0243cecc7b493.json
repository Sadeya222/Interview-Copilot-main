{"ast":null,"code":"import \"core-js/modules/es.array.push.js\";\n// Copyright (c) Microsoft Corporation. All rights reserved.\n// Licensed under the MIT license.\n/**\n * Responsible for building the object to be sent to the speech service to support dynamic grammars.\n * @class DynamicGrammarBuilder\n */\nexport class DynamicGrammarBuilder {\n  // Adds one more reference phrases to the dynamic grammar to send.\n  // All added phrases are generic phrases.\n  addPhrase(phrase) {\n    if (!this.privPhrases) {\n      this.privPhrases = [];\n    }\n    if (phrase instanceof Array) {\n      this.privPhrases = this.privPhrases.concat(phrase);\n    } else {\n      this.privPhrases.push(phrase);\n    }\n  }\n  // Clears all phrases stored in the current object.\n  clearPhrases() {\n    this.privPhrases = undefined;\n  }\n  // Adds one or more reference grammars to the current grammar.\n  addReferenceGrammar(grammar) {\n    if (!this.privGrammars) {\n      this.privGrammars = [];\n    }\n    if (grammar instanceof Array) {\n      this.privGrammars = this.privGrammars.concat(grammar);\n    } else {\n      this.privGrammars.push(grammar);\n    }\n  }\n  // clears all grammars stored on the recognizer.\n  clearGrammars() {\n    this.privGrammars = undefined;\n  }\n  // Generates an object that represents the dynamic grammar used by the Speech Service.\n  // This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance\n  // of a DynamicGrammarBuilder\n  generateGrammarObject() {\n    if (this.privGrammars === undefined && this.privPhrases === undefined) {\n      return undefined;\n    }\n    const retObj = {};\n    retObj.ReferenceGrammars = this.privGrammars;\n    if (undefined !== this.privPhrases && 0 !== this.privPhrases.length) {\n      const retPhrases = [];\n      this.privPhrases.forEach(value => {\n        retPhrases.push({\n          Text: value\n        });\n      });\n      retObj.Groups = [{\n        Type: \"Generic\",\n        Items: retPhrases\n      }];\n    }\n    return retObj;\n  }\n}","map":{"version":3,"names":["DynamicGrammarBuilder","addPhrase","phrase","privPhrases","Array","concat","push","clearPhrases","undefined","addReferenceGrammar","grammar","privGrammars","clearGrammars","generateGrammarObject","retObj","ReferenceGrammars","length","retPhrases","forEach","value","Text","Groups","Type","Items"],"sources":["src/common.speech/DynamicGrammarBuilder.ts"],"sourcesContent":["// Copyright (c) Microsoft Corporation. All rights reserved.\r\n// Licensed under the MIT license.\r\n\r\nimport {\r\n    IDynamicGrammar,\r\n    IDynamicGrammarGeneric,\r\n} from \"./Exports.js\";\r\n\r\n/**\r\n * Responsible for building the object to be sent to the speech service to support dynamic grammars.\r\n * @class DynamicGrammarBuilder\r\n */\r\nexport class DynamicGrammarBuilder {\r\n\r\n    private privPhrases: string[];\r\n    private privGrammars: string[];\r\n\r\n    // Adds one more reference phrases to the dynamic grammar to send.\r\n    // All added phrases are generic phrases.\r\n    public addPhrase(phrase: string | string[]): void {\r\n        if (!this.privPhrases) {\r\n            this.privPhrases = [];\r\n        }\r\n\r\n        if (phrase instanceof Array) {\r\n            this.privPhrases = this.privPhrases.concat(phrase);\r\n        } else {\r\n            this.privPhrases.push(phrase);\r\n        }\r\n    }\r\n\r\n    // Clears all phrases stored in the current object.\r\n    public clearPhrases(): void {\r\n        this.privPhrases = undefined;\r\n    }\r\n\r\n    // Adds one or more reference grammars to the current grammar.\r\n    public addReferenceGrammar(grammar: string | string[]): void {\r\n        if (!this.privGrammars) {\r\n            this.privGrammars = [];\r\n        }\r\n\r\n        if (grammar instanceof Array) {\r\n            this.privGrammars = this.privGrammars.concat(grammar);\r\n        } else {\r\n            this.privGrammars.push(grammar);\r\n        }\r\n    }\r\n\r\n    // clears all grammars stored on the recognizer.\r\n    public clearGrammars(): void {\r\n        this.privGrammars = undefined;\r\n    }\r\n\r\n    // Generates an object that represents the dynamic grammar used by the Speech Service.\r\n    // This is done by building an object with the correct layout based on the phrases and reference grammars added to this instance\r\n    // of a DynamicGrammarBuilder\r\n    public generateGrammarObject(): IDynamicGrammar {\r\n        if (this.privGrammars === undefined && this.privPhrases === undefined) {\r\n            return undefined;\r\n        }\r\n\r\n        const retObj: IDynamicGrammar = {};\r\n        retObj.ReferenceGrammars = this.privGrammars;\r\n\r\n        if (undefined !== this.privPhrases && 0 !== this.privPhrases.length) {\r\n            const retPhrases: IDynamicGrammarGeneric[] = [];\r\n\r\n            this.privPhrases.forEach((value: string): void => {\r\n                retPhrases.push({\r\n                    Text: value,\r\n                });\r\n            });\r\n\r\n            retObj.Groups = [{ Type: \"Generic\", Items: retPhrases }];\r\n        }\r\n\r\n        return retObj;\r\n    }\r\n}\r\n"],"mappings":";AAAA;AACA;AAOA;;;;AAIA,OAAM,MAAOA,qBAAqB;EAK9B;EACA;EACOC,SAASA,CAACC,MAAyB;IACtC,IAAI,CAAC,IAAI,CAACC,WAAW,EAAE;MACnB,IAAI,CAACA,WAAW,GAAG,EAAE;;IAGzB,IAAID,MAAM,YAAYE,KAAK,EAAE;MACzB,IAAI,CAACD,WAAW,GAAG,IAAI,CAACA,WAAW,CAACE,MAAM,CAACH,MAAM,CAAC;KACrD,MAAM;MACH,IAAI,CAACC,WAAW,CAACG,IAAI,CAACJ,MAAM,CAAC;;EAErC;EAEA;EACOK,YAAYA,CAAA;IACf,IAAI,CAACJ,WAAW,GAAGK,SAAS;EAChC;EAEA;EACOC,mBAAmBA,CAACC,OAA0B;IACjD,IAAI,CAAC,IAAI,CAACC,YAAY,EAAE;MACpB,IAAI,CAACA,YAAY,GAAG,EAAE;;IAG1B,IAAID,OAAO,YAAYN,KAAK,EAAE;MAC1B,IAAI,CAACO,YAAY,GAAG,IAAI,CAACA,YAAY,CAACN,MAAM,CAACK,OAAO,CAAC;KACxD,MAAM;MACH,IAAI,CAACC,YAAY,CAACL,IAAI,CAACI,OAAO,CAAC;;EAEvC;EAEA;EACOE,aAAaA,CAAA;IAChB,IAAI,CAACD,YAAY,GAAGH,SAAS;EACjC;EAEA;EACA;EACA;EACOK,qBAAqBA,CAAA;IACxB,IAAI,IAAI,CAACF,YAAY,KAAKH,SAAS,IAAI,IAAI,CAACL,WAAW,KAAKK,SAAS,EAAE;MACnE,OAAOA,SAAS;;IAGpB,MAAMM,MAAM,GAAoB,EAAE;IAClCA,MAAM,CAACC,iBAAiB,GAAG,IAAI,CAACJ,YAAY;IAE5C,IAAIH,SAAS,KAAK,IAAI,CAACL,WAAW,IAAI,CAAC,KAAK,IAAI,CAACA,WAAW,CAACa,MAAM,EAAE;MACjE,MAAMC,UAAU,GAA6B,EAAE;MAE/C,IAAI,CAACd,WAAW,CAACe,OAAO,CAAEC,KAAa,IAAU;QAC7CF,UAAU,CAACX,IAAI,CAAC;UACZc,IAAI,EAAED;SACT,CAAC;MACN,CAAC,CAAC;MAEFL,MAAM,CAACO,MAAM,GAAG,CAAC;QAAEC,IAAI,EAAE,SAAS;QAAEC,KAAK,EAAEN;MAAU,CAAE,CAAC;;IAG5D,OAAOH,MAAM;EACjB"},"metadata":{},"sourceType":"module","externalDependencies":[]}